The software for the Arduino / Ledcube is Free Software, it may be
distributed under the GPL Licence, either version 2, or (at your
option) a later version of the GPL. See the file COPYING for details.

Elements:

ledcube.c - this is the controller software. It is written for the 16
MHz atmega328p Avr microcontroller. There is a Makefile for this - `make
upload` installs the program over USB. `make tty` prepares the serial port.


mk_animation.cc - this generates the animations. Compile with `g++
mk_animation.cc`. The output can be in different formats, --ledpro5 matches
the wiring for the 5x5x5 cube, --ledpro is the protocol for the 11x11x11 (may
still need adjustments for the final wiring). --ledpro can also be used to
pipe to the OpenGL visualisation tool
https://github.com/knielsen/ledcube-viewer. --loop repeats the animation
infinitely.


framerate-control.pl - this program reads the output from mk_animation.cc from
stdin (eg. from a pipe), and sends it to the microcontroller over the serial
port (remember `make tty` to set correct speed etc). It adjusts the framerate
to the nominal 50 frames per second (apart from that, writing the animation
directly to the serial port should also work - just the animation will play
around 50% faster).


Example:

    make upload
    make tty
    ./a.out --ledpro --loop| perl framerate-control.pl

    g++ -g mk_animation.cc && ./a.out --ledpro --loop  | ledcube-viewer --11

-----------------------------------------------------------------------

Ledcube Arduino pinout

GSCLK  6    5940-18          VPRG  5940-27  low=GS high=DC mode
BLANK  8    5940-23          GND   5940-22
VPRG   9    5940-27          VCC   5940-21
XLAT  10    5940-24          IREF  5940-20  resistor-towards-ground
SIN   11    5940-26          DCPRG 5940-19  low=EEPROM high=DC register
SOUT  12    5940-17          XERR  5940-16
SCLK  13    5940-25
                OUT0-15 5940-28,1-15

FET inputs with arduino flat-cable connections:

FET1    2
FET2    3
FET3    4
FET4    5
FET5    7
FET6   A5
FET7   A4
FET8   A3
FET9   A2
FET10  A1
FET11  A0

Print pinout (set fra komponentside):

"knielsen 2012 rev2"  | | | | | | | | | | | | | | | | | | | | |      | |
                      2 2 1 1 1 1 1 1 1 1 1 1                    +6.5V GND
                      1 0 9 8 7 6 5 4 3 2 1 0 9 8 7 6 5 4 3 2 1
                      l l l l l S G X G V l B X S S V l l l l l
                      1 9 8 7 6 O N E S C 5 L L C I P 4 3 2 1 0
                      0         U D R C C   A A L N R
                                T   R L     N T K   G
                                      K     K


[Fikset: IC 2 pin 15 + 28 er ikke forbundet (har glemt at lodde!)]
[Fikset: IC 6 pin 3: kortsluttet til GND - patchet til IC 8 pin 15]
[Fikset: IC 7: ben 7 og 8 er kortsluttet med hinanden]
[Fikset: Søjle (x,y)=(7,10) - fikset lodning på chip]

Fejl:

 - Kuben glitcher ved fuld knald på et lag med DC>2, for DC=12 crasher
   den på en eller anden måde så det er nødvending at tage strømmen på
   arduino (reset er ikke nok). For DC=2 kører det fint.

 - Med Uno er der fejl på seriel. Med Duomi... kører den stabilt. Den
   nye usb-to-seriel i Uno er åbentbart ikke gearet til 500kbit.
   (eller kan det være driveren i Linux?)

 - LED (9, 10, 9) lyser svagere end de andre. Hele (y,z)=(10,9) går
   død ved meget lav strøm, men virker ved normal spændingstilføring.
   (jeg tror den LED er lidt off-key - evt. lodningen. Kunne skifte den,
   men det er ikke et stort problem i praksis.)

 - i framerate_control.pl laver min select(..., timeout=0) 0.2 sek
   delay hver 10. sekund. Det virker bare at fjerne den (men
   ... hvorfor?)

